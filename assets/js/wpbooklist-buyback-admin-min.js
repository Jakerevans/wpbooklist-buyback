console.log(wpbooklist_buyback_php_variables),jQuery(document).ready(function(L){var b=L("#wpbooklist-buyback-title-response"),c=L("#wpbooklist-smile-icon-1"),r=L("#wpbooklist-buyback-status-div"),n=L("#wpbooklist-spinner-buyback"),u="",p=0,k=0,d=(p=0,0),m="",y=0,w=0;function l(t,e){t=t.split("--sep--seperator--sep--");console.log(t),L("#wpbooklist-buyback-checkout-div").html(t[2]);var a=JSON.parse(t[1]);t=JSON.parse(t[0]),console.log("pricingScheme"),console.log(a);var o='<div id="wpbooklist-buyback-results-container"><div id="wpbooklist-buyback-add-books-div"><div id="wpbooklist-buyback-library-select"></div></div></div>';if(console.log(t),null==t||null==t.Items||null==t.Items.Item)L("#wpbooklist-buyback-results-div").html("<p>Whoops! We couldn't find any results for your Book Search! Be sure to check the Title and/or Author you provided and try again!</p>"),L("#wpbooklist-buyback-results-div").animate({opacity:"1"}),L("#wpbooklist-spinner-buyback").animate({opacity:"0"});else{var i=t.Items.Item.length;if(null==i&&(i=1),"initial"==e&&(s=i-1),"titlesearch"==e)var s=0;for(var l=s;l<i;l++){var b="",c="",r="",n="",u="",p="",k="",d="",m="",y=(b="",d="",""),w="",v=0,g="",h="";if(console.log(t),null!=t.Items.Item[l]){if(null!=t.Items.Item[l].OfferSummary&&null!=t.Items.Item[l].OfferSummary.LowestUsedPrice&&(g=t.Items.Item[l].OfferSummary.LowestUsedPrice.Amount,h=t.Items.Item[l].OfferSummary.LowestUsedPrice.FormattedPrice,v=t.Items.Item[l].SalesRank),null!=t.Items.Item[l].SimilarProducts&&null!=t.Items.Item[l].SimilarProducts.SimilarProduct)for(var f=0;f<t.Items.Item[l].SimilarProducts.SimilarProduct.length;f++)w=w+";bsp;"+t.Items.Item[l].SimilarProducts.SimilarProduct[f].ASIN+"---"+t.Items.Item[l].SimilarProducts.SimilarProduct[f].Title;null!=t.Items.Item[l].ASIN&&(d=t.Items.Item[l].ASIN),null!=t.Items.Item[l].CustomerReviews&&null!=t.Items.Item[l].CustomerReviews.IFrameURL&&(m=t.Items.Item[l].CustomerReviews.IFrameURL),null!=t.Items.Item[l].DetailPageURL&&(y=t.Items.Item[l].DetailPageURL),null!=t.Items.Item[l].ItemAttributes&&(null!=t.Items.Item[l].ItemAttributes.Author&&(c=t.Items.Item[l].ItemAttributes.Author),null!=t.Items.Item[l].ItemAttributes.EAN&&(d=t.Items.Item[l].ItemAttributes.EAN),null!=t.Items.Item[l].ItemAttributes.NumberOfPages&&(r=t.Items.Item[l].ItemAttributes.NumberOfPages),null!=t.Items.Item[l].ItemAttributes.Publisher&&(n=t.Items.Item[l].ItemAttributes.Publisher),null!=t.Items.Item[l].ItemAttributes.PublicationDate&&(u=t.Items.Item[l].ItemAttributes.PublicationDate),null!=t.Items.Item[l].ItemAttributes.Title&&(p=t.Items.Item[l].ItemAttributes.Title)),b=null!=t.Items.Item[l].LargeImage&&null!=t.Items.Item[l].LargeImage.URL?t.Items.Item[l].LargeImage.URL:"",null!=t.Items.Item[l].EditorialReviews&&null!=t.Items.Item[l].EditorialReviews.EditorialReview&&t.Items.Item[l].EditorialReviews.EditorialReview.Content&&(k=(k=(k=t.Items.Item[l].EditorialReviews.EditorialReview.Content).replace(/"/g,"'")).replace(/“/g,"'")),""==k&&null!=t.Items.Item[l].EditorialReviews&&null!=t.Items.Item[l].EditorialReviews.EditorialReview[0]&&(k=(k=(k=t.Items.Item[l].EditorialReviews.EditorialReview[0].Content).replace(/"/g,"'")).replace(/“/g,"'"))}else{if(null!=t.Items.Item.OfferSummary&&null!=t.Items.Item.OfferSummary.LowestUsedPrice&&(g=t.Items.Item.OfferSummary.LowestUsedPrice.Amount,h=t.Items.Item.OfferSummary.LowestUsedPrice.FormattedPrice,v=t.Items.Item.SalesRank),null!=t.Items.Item.SimilarProducts&&null!=t.Items.Item.SimilarProducts.SimilarProduct)for(f=0;f<t.Items.Item.SimilarProducts.SimilarProduct.length;f++)w=w+";bsp;"+t.Items.Item.SimilarProducts.SimilarProduct[f].ASIN+"---"+t.Items.Item.SimilarProducts.SimilarProduct[f].Title;null!=t.Items.Item.ASIN&&(d=t.Items.Item.ASIN),null!=t.Items.Item.CustomerReviews&&null!=t.Items.Item.CustomerReviews.IFrameURL&&(m=t.Items.Item.CustomerReviews.IFrameURL),null!=t.Items.Item.DetailPageURL&&(y=t.Items.Item.DetailPageURL),null!=t.Items.Item.ItemAttributes&&(null!=t.Items.Item.ItemAttributes.Author&&(c=t.Items.Item.ItemAttributes.Author),null!=t.Items.Item.ItemAttributes.EAN&&(d=t.Items.Item.ItemAttributes.EAN),null!=t.Items.Item.ItemAttributes.NumberOfPages&&(r=t.Items.Item.ItemAttributes.NumberOfPages),null!=t.Items.Item.ItemAttributes.Publisher&&(n=t.Items.Item.ItemAttributes.Publisher),null!=t.Items.Item.ItemAttributes.PublicationDate&&(u=t.Items.Item.ItemAttributes.PublicationDate),null!=t.Items.Item.ItemAttributes.Title&&(p=t.Items.Item.ItemAttributes.Title)),b=null!=t.Items.Item.LargeImage&&null!=t.Items.Item.LargeImage.URL?t.Items.Item.LargeImage.URL:"",null!=t.Items.Item.EditorialReviews&&null!=t.Items.Item.EditorialReviews.EditorialReview&&t.Items.Item.EditorialReviews.EditorialReview.Content&&(k=(k=(k=t.Items.Item.EditorialReviews.EditorialReview.Content).replace(/"/g,"'")).replace(/“/g,"'")),""==k&&null!=t.Items.Item.EditorialReviews&&null!=t.Items.Item.EditorialReviews.EditorialReview[0]&&(k=(k=(k=t.Items.Item.EditorialReviews.EditorialReview[0].Content).replace(/"/g,"'")).replace(/“/g,"'"))}console.log("pricingScheme[0]"),console.log(a[0]);var I=a[0].rankcalcs.split(";"),_=I.length,x=0,P=0,S=0;for(f=0;f<_;f++){if(0==x)if(tempPricingScheme2=I[f].split("-"),v>=parseInt(tempPricingScheme2[0])&&v<=parseInt(tempPricingScheme2[1]))x=h.substring(0,1)+(P=x=(h.substring(1)*(.01*tempPricingScheme2[2])).toFixed(2)),S=tempPricingScheme2[3]}console.log("finalPrice"),console.log(x),console.log("threshold"),console.log(S);var A="",E=1,R="";(0==x||0==x||P<S)&&(x="Sorry, we're unable to purchase this title!",R="bottom:0; font-size:18px;",A="disabled",E=0),null!=b&&null!=b&&""!=b||(b=wpbooklist_buyback_php_variables.wpbooklistbuybackrootimgiconsurl+"image_unavaliable.png"),o=o+'<div class="wpbooklist-buyback-indiv-holder"><div data-priceformatted="'+h+'" data-unformatted="'+g+'" data-rank="'+v+'" data-similar="'+w+'" data-details="'+y+'" data-isbn="'+d+'" data-title="'+p+'" data-author="'+c+'" data-category="" data-pages="'+r+'" data-publisher="'+n+'" data-pubdate="'+u+'" data-description="'+k+'" data-isbn="'+d+'" data-review="'+m+'" data-similar=""   class="wpbooklist-buyback-results-indiv"><img class="wpbooklist-buyback-colorbox" src="'+b+'" /><div id="wpbooklist_saved_title_and_select_div"><p class="wpbooklist_saved_title_link" id="wpbooklist_saved_title_link">'+p+'</p><div style="'+R+'" class="wpbooklist-buyback-quote-div"><span class="wpbooklist-buyback-quote-label">Quote:</span><span class="wpbooklist-buyback-quote-actual">'+x+'</span></div><div class="wpbooklist-buyback-checkbox-div"><button style="opacity:'+E+';" '+A+' id="wpbooklist-buyback-select-title-button-id-'+l+'" data-triggered="false" data-bookimgsrc="'+b+'" data-bookisbn="'+d+'" data-bookvalue="'+P+'" data-booktitle="'+p+'" data-buttonid="'+l+'" class="wpbooklist-buyback-select-title-button">Sell This Book</button></div></div></div></div>'}o+="initial"==e?'<div id="wpbooklist-buyback-notbook-div"><p>Not the Right Book? Search by title here:</p><input placeholder="Search by Title" id="wpbooklist-buyback-title-input" type="text"/><button id="wpbooklist-buyback-search-title-button">Search by Title</button></div></div>':"",L("#wpbooklist-buyback-results-div").html(o),L("#wpbooklist-buyback-library-select").html(t[1]),L("#wpbooklist-buyback-results-div").animate({opacity:"1"}),L("#wpbooklist-spinner-buyback").animate({opacity:"0"})}}b.animate({opacity:"0",height:"0px"},1e3),r.animate({opacity:"0","margin-bottom":"0px"},1e3),L(document).on("click","#wpbooklist-buyback-add-checked",function(t){p=w=0,L("#wpbooklist-buyback-div-for-hiding-scroll").animate({height:"155px"}),L("#wpbooklist-buyback-status-div").animate({"margin-bottom":"90px"}),L("#wpbooklist-buyback-add-checked").prop("disabled",!0),L(".wpbooklist-buyback-checkbox-div input").each(function(){1==L(this).prop("checked")&&w++}),n.animate({opacity:"1"},1e3),r.animate({opacity:"1","margin-bottom":"90px"},1e3),r.html('<p>Adding <span class="wpbooklist-color-orange-italic">'+w+"</span> Books...</p>"),0!=(k=L("#wpbooklist-buyback-search-button").offset().top-50)&&(L("html, body").animate({scrollTop:k},500),k=0);var l=[];L(".wpbooklist-buyback-checkbox-div input").each(function(){l.push(L(this).parent().parent().attr("data-isbn"))}),function t(){l[y];var e=L("#wpbooklist-buyback-select-library").val(),a=L("#buyback-create-page").prop("checked"),o=L("#buyback-create-post").prop("checked"),i=L("#buyback-create-woo").prop("checked"),s={action:"wpbooklist_buyback_addbooks_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce1,isbn:l[y],library:e,page:a,post:o,woo:i};L.ajax({url:ajaxurl,type:"POST",data:s,timeout:0,success:function(t){if(""==(t=t.split("sep"))[7]||"undefined"==t[7]||null==t[7]?(m=m+","+t[8],d++):(p++,b.scrollTop(b.prop("scrollHeight")),b.animate({opacity:"1"},1e3),c.animate({opacity:"1"},1e3),b.css({height:"155px"}),u=u+" Added<br/><span class='wpbooklist-buyback-response-span'>'"+t[7]+"'</span><br/>",b.html(u),r.html('<p>Adding <span class="wpbooklist-color-orange-italic">'+w+'</span> Books...</p><p>Succesfully Added <span class="wpbooklist-color-orange-italic">'+p+'</span> books!<img id="wpbooklist-smile-icon-1" src="'+wpbooklist_buyback_php_variables.wpbooklistbuybackrootimgiconsurl+'smile.png" /><p>')),p==w-d){n.animate({opacity:"0"},1e3);var e=(m=m.replace(/^,|,$/g,"")).split(","),a=[];L.each(e,function(t,e){-1===L.inArray(e,a)&&a.push(e)});var o="";if(0<a.length&&""!=a[0]){for(var i=a.length-1;0<=i;i--)"undefined"!=a[i]&&null!=a[i]&&(o=o+'<p class="wpbooklist-buyback-error-isbn">'+a[i]+"</p>");b.html('<p id="wpbooklist-buyback-isbn-error-message"><span class="wpbooklist-color-orange-italic">WPBookList</span> had trouble finding information for these ISBN Numbers:</p>'+o),b.animate({scrollTop:0},"fast")}console.log(a),L("#wpbooklist-buyback-add-checked").prop("disabled",!1)}},error:function(t,e,a){console.log(a),console.log(e),console.log(t),d++},complete:function(){y++,p!=w-d&&setTimeout(t,1e3)}})}(),t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click","#wpbooklist-buyback-all-checked",function(t){L(".wpbooklist-buyback-checkbox-div input").each(function(){L(this).prop("checked",!0)}),L("#wpbooklist-buyback-add-checked").prop("disabled",!1),t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click","#wpbooklist-buyback-add-uncheck",function(t){L(".wpbooklist-buyback-checkbox-div input").each(function(){L(this).prop("checked",!1)}),L("#wpbooklist-buyback-add-checked").prop("disabled",!0),t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click",".wpbooklist-buyback-checkbox-div input",function(t){1==L(this).prop("checked")?L("#wpbooklist-buyback-add-checked").prop("disabled",!1):(L("#wpbooklist-buyback-add-checked").prop("disabled",!0),L(".wpbooklist-buyback-checkbox-div input").each(function(){1==L(this).prop("checked")&&L("#wpbooklist-buyback-add-checked").prop("disabled",!1)}))}),L("#wpbooklist-buyback-search-button").click(function(t){var e=L("#wpbooklist-buyback-author-input").val(),a=L("#wpbooklist-buyback-title-input").val(),o=L("#wpbooklist-buyback-isbn").val(),i="";(o=o.replace(/-/g,""),-1<window.location.search.indexOf("buybackusername="))&&(i=new URL(window.location.href).searchParams.get("buybackusername"));"Search by Title"==a&&(a=""),"Search by Author"==e&&(e=""),L("#wpbooklist-spinner-buyback").animate({opacity:"1"}),L("#wpbooklist-buyback-results-div").animate({opacity:"0"}),L("#wpbooklist-buyback-results-div").animate({opacity:0});var s={action:"wpbooklist_buyback_search_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce3,author:e,title:a,isbn:o,username:i};L.ajax({url:ajaxurl,type:"POST",data:s,timeout:0,success:function(t){l(t,"initial")}});t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click",".wpbooklist-buyback-colorbox",function(t){var e=L(this).parent().attr("data-title"),a=L(this).parent().attr("data-author"),o=L("input[name='book-category']").val(),i=L(this).parent().attr("data-pages"),s=L(this).parent().attr("data-pubdate"),l=L(this).parent().attr("data-publisher"),b=L(this).parent().attr("data-description"),c=L(this).attr("src"),r=L(this).parent().attr("data-review"),n=L(this).parent().attr("data-isbn"),u=L(this).parent().attr("data-details"),p=L(this).parent().attr("data-similar"),k={action:"wpbooklist_buyback_colorbox_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce4,title:e,author:a,category:o,pages:i,pubYear:s,publisher:l,description:b,image:c,reviews:r,isbn:n,details:u,similar:p};L.colorbox({iframe:!0,title:"<?php echo $trans1; ?>",width:"50%",height:"80%",html:"&nbsp;",fastIframe:!1,onComplete:function(){L("#cboxLoadingGraphic").show(),L("#cboxLoadingGraphic").css({display:"block"})}});L.ajax({url:ajaxurl,type:"POST",data:k,timeout:0,success:function(t){console.log(t),L.colorbox({open:!0,preloading:!0,scrolling:!0,width:"70%",height:"70%",html:t,onClosed:function(){},onComplete:function(){L(".wpbooklist-similar-image").load(function(){var t=new Image;t.src=L(this).attr("src"),"1"==t.naturalHeight&&L(this).parent().parent().css({display:"none"})}),addthis.toolbox(L(".addthis_sharing_toolbox").get()),addthis.toolbox(L(".addthis_sharing_toolbox").get()),addthis.counter(L(".addthis_counter").get())}}),console.log(t)}});t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click","#wpbooklist-buyback-search-title-button",function(t){var e=L("#wpbooklist-buyback-title-input").val();"Search by Title"==e&&(e=""),L("#wpbooklist-spinner-buyback").animate({opacity:"1"}),L("#wpbooklist-buyback-results-div").animate({opacity:"0"}),L("#wpbooklist-buyback-results-div").animate({opacity:0});var a={action:"wpbooklist_buyback_search_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce3,title:e};L.ajax({url:ajaxurl,type:"POST",data:a,timeout:0,success:function(t){l(t,"titlesearch")}});t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click",".wpbooklist-buyback-select-title-button",function(t){L("#wpbooklist-buyback-checkout-div").animate({opacity:1},1e3),0!=(k=L("#wpbooklist-buyback-checkout-div").offset().top-50)&&(L("html, body").animate({scrollTop:k},1e3),k=0);var e=L(this).attr("data-buttonid"),a=L(this).attr("data-bookimgsrc"),o=L(this).attr("data-bookisbn"),i=L(this).attr("data-booktitle"),s=L(this).attr("data-bookvalue");L("#wpbooklist-buyback-login-button").attr("data-selectedbook",e),L("#wpbooklist-buyback-register-button").attr("data-selectedbook",e);var l='<div class="wpbooklist-buyback-cart-div-row"><div class="wpbooklist-buyback-cart-img-div"><img class="wpbooklist-buyback-cart-img-actual" src="'+a+'"/></div><div style="margin-left:4px;" class="wpbooklist-buyback-cart-title-div"><p class="wpbooklist-buyback-cart-title-actual">'+i+'</p><p class="wpbooklist-buyback-cart-title-isbn-actual">'+o+'</p></div><div style="margin-left:3px;" class="wpbooklist-buyback-cart-value-div"><p class="wpbooklist-buyback-cart-value-actual">$'+s+'</p><div class="wpbooklist-buyback-cart-value-remove-div" data-dbstring="'+(o+";;;"+i+";;;"+a+";;;"+s)+'"><img class="wpbooklist-buyback-cart-value-remove-img-actual" src="'+wpbooklist_buyback_php_variables.wpbooklistbuybackrootimgiconsurl+'cancel-button.svg" /><p style="margin-left:3px;" class="wpbooklist-buyback-cart-value-remove-text-actual">Remove from Cart</p></div></div></div>';L(l).insertBefore(L(".wpbooklist-buyback-cart-summary-row")),L("#wpbooklist-buyback-cart-summary-span-value-calc").text((parseFloat(L("#wpbooklist-buyback-cart-summary-span-value-calc").text())+parseFloat(s)).toFixed(2)),L("#wpbooklist-buyback-cart-summary-span-total-calc").text(parseInt(L("#wpbooklist-buyback-cart-summary-span-total-calc").text())+1);var b={action:"wpbooklist_buyback_add_to_cart_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce8,title:i,isbn:o,image:a,value:s};L.ajax({url:ajaxurl,type:"POST",data:b,timeout:0,success:function(t){console.log(t)}});t.preventDefault?t.preventDefault():t.returnValue=!1}),L(document).on("click","#wpbooklist-buyback-login-button",function(t){L("#wpbooklist-buyback-login-reg-button-error-p").text("");var a=L("#wpbooklist-buyback-login-reg-contact-field-username").val(),o=L("#wpbooklist-buyback-login-reg-contact-field-password").val(),i=L("#wpbooklist-buyback-isbn").val(),s=(L("#wpbooklist-buyback-title-input").val(),L(this).attr("data-selectedbook"));if(""!=a)if(""!=o){!0,L("#wpbooklist-spinner-buyback-login").animate({opacity:"1"});var e={action:"wpbooklist_buyback_login_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce5,email:a,password:o};L.ajax({url:ajaxurl,type:"POST",data:e,timeout:0,success:function(t){if("--Username Found----Password Matches--"==t){var e=window.location.href+"?buybackusername="+a+"&isbn="+i+"&book="+s;window.location.href=e}"--Username Found----Password Does Not Match--"==t&&(L("#wpbooklist-buyback-login-reg-button-error-p").text("Whoops! Looks like you entered the wrong password!"),L("#wpbooklist-spinner-buyback-login").animate({opacity:"0"})),t=="Username not found!--"+a+"--"+o&&(L("#wpbooklist-buyback-login-reg-button-error-p").text("Whoops! Looks like we can't find that Username!"),L("#wpbooklist-spinner-buyback-login").animate({opacity:"0"})),console.log(t)}});t.preventDefault?t.preventDefault():t.returnValue=!1}else L("#wpbooklist-buyback-login-reg-button-error-p").text("Enter a Password!");else L("#wpbooklist-buyback-login-reg-button-error-p").text("Enter a Username/E-Mail Address!")}),jQuery(window).load(function(){var t=L("#wpbooklist-buyback-isbn"),e=L("#wpbooklist-buyback-search-button");if(-1<window.location.search.indexOf("buybackusername=")&&0<t.length){var a,o=(a=new URL(window.location.href)).searchParams.get("buybackusername"),i={action:"wpbooklist_buyback_populate_userdata_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce6,email:o},s=(L.ajax({url:ajaxurl,type:"POST",data:i,timeout:0,success:function(t){t=JSON.parse(t),console.log(t[0].firstname);var e=setInterval(function(){"#wpbooklist-buyback-checkout-contact-field-firstname".length&&(L("#wpbooklist-buyback-checkout-contact-field-firstname").val(t[0].firstname),L("#wpbooklist-buyback-checkout-contact-field-lastname").val(t[0].lastname),L("#wpbooklist-buyback-checkout-contact-field-streetaddress").val(t[0].streetaddress),L("#wpbooklist-buyback-checkout-contact-field-city").val(t[0].city),L("#wpbooklist-buyback-checkout-contact-field-zip").val(t[0].zipcode),L("#wpbooklist-buyback-checkout-contact-field-firstname").val()==t[0].firstname&&clearInterval(e))},100);console.log(t)}}),(a=new URL(window.location.href)).searchParams.get("buybackusername"),a.searchParams.get("isbn")),l=(a.searchParams.get("search"),a.searchParams.get("book"));t.val(s),e.trigger("click"),L("#wpbooklist-buyback-select-title-button-id-"+l).trigger("click");var b=setInterval(function(){l.length,"false"==L("#wpbooklist-buyback-select-title-button-id-"+l).attr("data-triggered")&&(L("#wpbooklist-buyback-select-title-button-id-"+l).trigger("click"),L("#wpbooklist-buyback-select-title-button-id-"+l).attr("data-triggered","true")),1==L("#wpbooklist-buyback-checkout-div").css("opacity")&&clearInterval(b)},100)}}),L(document).on("click","#wpbooklist-buyback-register-button",function(t){L("#wpbooklist-buyback-register-button-error-p").text("");var a=L("#wpbooklist-buyback-login-reg-contact-field-email").val(),e=L("#wpbooklist-buyback-login-reg-contact-field-register-password").val(),o=L("#wpbooklist-buyback-login-reg-contact-field-register-reenterpassword").val(),i=L("#wpbooklist-buyback-login-reg-contact-field-firstname").val(),s=L("#wpbooklist-buyback-login-reg-contact-field-lastname").val(),l=L("#wpbooklist-buyback-login-reg-contact-field-streetaddress").val(),b=L("#wpbooklist-buyback-login-reg-contact-field-city").val(),c=L("#wpbooklist-buyback-login-reg-contact-field-state").val(),r=L("#wpbooklist-buyback-login-reg-contact-field-zip").val(),n=L("#wpbooklist-buyback-isbn").val(),u=(L("#wpbooklist-buyback-title-input").val(),L(this).attr("data-selectedbook"));if(""!=i)if(""!=s)if(""!=l)if(""!=b)if("Select a State..."!=c)if(""!=r)if(""!=e)if(""!=o)if(e===o)if(""!=a){!0,L("#wpbooklist-spinner-buyback-register").animate({opacity:"1"});var p={action:"wpbooklist_buyback_register_userdata_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce7,username:a,password:e,email:a,state:c,city:b,streetaddress:l,firstname:i,lastname:s,zip:r};L.ajax({url:ajaxurl,type:"POST",data:p,timeout:0,success:function(t){if(L("#wpbooklist-spinner-buyback-register").animate({opacity:"0"}),"Success!"==t){L("#wpbooklist-buyback-register-button-error-p").text("Success!");var e=window.location.href+"?buybackusername="+a+"&isbn="+n+"&book="+u;window.location.href=e}else L("#wpbooklist-buyback-register-button-error-p").text(t);console.log(t)}});t.preventDefault?t.preventDefault():t.returnValue=!1}else L("#wpbooklist-buyback-register-button-error-p").text("Enter an E-Mail Address!");else L("#wpbooklist-buyback-register-button-error-p").text("Your passwords don't match!");else L("#wpbooklist-buyback-register-button-error-p").text("Re-Enter your Password!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter a Password!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter a Zip Code!");else L("#wpbooklist-buyback-register-button-error-p").text("Select a State!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter a City!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter your Street Address!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter your Last Name!");else L("#wpbooklist-buyback-register-button-error-p").text("Enter your First Name!")}),L(document).on("click",".wpbooklist-buyback-cart-value-remove-div",function(t){L(this).parent().parent().remove();var e=L("#wpbooklist-buyback-cart-summary-span-total-calc").text();L("#wpbooklist-buyback-cart-summary-span-total-calc").text(parseInt(e)-1);L("#wpbooklist-buyback-cart-summary-span-value-calc").text();var a=L(this).prev().text();a=a.replace("$",""),L("#wpbooklist-buyback-cart-summary-span-value-calc").text((parseFloat(L("#wpbooklist-buyback-cart-summary-span-value-calc").text())-parseFloat(a)).toFixed(2));var o=L(this).attr("data-dbstring"),i={action:"wpbooklist_buyback_add_to_cart_remove_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce9,dbString:o};L.ajax({url:ajaxurl,type:"POST",data:i,timeout:0,success:function(t){console.log(t)}})}),L(document).on("change","#wpbooklist-buyback-checkout-contact-field-payment",function(t){"PayPal"==L(this).val()&&L(".wpbooklist-buyback-checkout-row-paypal-email").animate({height:"119px",opacity:"1"})}),L(document).on("click","#wpbooklist-buyback-finalize-sale-button",function(t){L("#wpbooklist-buyback-finalize-sale-button-error-p").text("");var e=L("#wpbooklist-buyback-checkout-contact-field-email").val(),a=L("#wpbooklist-buyback-checkout-contact-field-firstname").val(),o=L("#wpbooklist-buyback-checkout-contact-field-lastname").val(),i=L("#wpbooklist-buyback-checkout-contact-field-streetaddress").val(),s=L("#wpbooklist-buyback-checkout-contact-field-city").val(),l=L("#wpbooklist-buyback-checkout-contact-field-state").val(),b=L("#wpbooklist-buyback-checkout-contact-field-zipcode").val(),c=L("#wpbooklist-buyback-checkout-contact-field-phone").val(),r=L("#wpbooklist-buyback-checkout-contact-field-payment").val(),n="",u="",p="";p="";if(L(".wpbooklist-buyback-cart-div-row").each(function(){var t=L(this).find(".wpbooklist-buyback-cart-img-actual").attr("src"),e=L(this).find(".wpbooklist-buyback-cart-title-actual").text(),a=L(this).find(".wpbooklist-buyback-cart-title-isbn-actual").text(),o=L(this).find(".wpbooklist-buyback-cart-value-actual").text().replace("$","");p=p+a+";;;"+e+";;;"+t+";;;"+o+"----"}),console.log(p),""!=a)if(""!=o)if(""!=e)if(""!=i)if(""!=s)if("Select a State..."!=l&&null!=l)if(""!=b)if(""!=c)if("Select a Payment Method..."!=r&&null!=r){if("PayPal"==L("#wpbooklist-buyback-checkout-contact-field-payment").val()){if(n=L("#wpbooklist-buyback-checkout-contact-field-paypalemail-1").val(),u=L("#wpbooklist-buyback-checkout-contact-field-paypalemail-2").val(),""==n)return void L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter a PayPal E-Mail Address!");if(""==u)return void L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Verify your PayPal E-Mail Address!");if(n!==u)return void L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Looks like your PayPal E-Mail Addresses don't match!")}L("#wpbooklist-spinner-buyback-finalize-sale").animate({opacity:"1"});var k={action:"wpbooklist_buyback_finalize_sale_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce10,firstname:a,lastname:o,books:p,streetaddress:i,phone:c,email:e,paypalemail:u,paymentmethod:r,city:s,state:l,zip:b};L.ajax({url:ajaxurl,type:"POST",data:k,timeout:0,success:function(t){console.log(t),"Success!"==t&&(t="<p>You've successfully placed your order! You should recieve an E-Mail with further instructions shortly.</p><p>Thanks for choosing The Bookkeeper's Den!</p>"),L("#wpbooklist-spinner-buyback-finalize-sale").animate({opacity:"0"}),L("#wpbooklist-buyback-finalize-sale-button-error").html(t)}})}else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Choose a Payment Method!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter a Phone Number!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter a Zip Code!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Select a State!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter a City!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter your Street Address!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter an E-Mail Address!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter your Last Name!");else L("#wpbooklist-buyback-finalize-sale-button-error-p").text("Enter your First Name!")}),L(document).on("change",".wpbooklist-buyback-settings-input",function(t){var e=L(this).attr("id"),a=e.split("-"),o=(parseInt(a[5]),L(".wpbooklist-buyback-settings-input").length),i=parseInt(L(this).val()),s=0;L(".wpbooklist-buyback-settings-input").each(function(t){L(this).attr("id")==e&&(s=t)});for(var l=s;l<o-1;l++){var b=L(".wpbooklist-buyback-settings-input")[l].id,c=parseInt(L("#"+b).val())+1,r=L(".wpbooklist-buyback-settings-input")[l+1].id;parseInt(L("#"+r).val())<=i&&L("#"+r).val(c)}}),L(document).on("change",".wpbooklist-buyback-settings-input",function(t){var e=L(this).attr("id"),a=e.split("-"),o=(parseInt(a[5]),L(".wpbooklist-buyback-settings-input").length,parseInt(L(this).val())),i=0;L(".wpbooklist-buyback-settings-input").each(function(t){L(this).attr("id")==e&&(i=t)});for(var s=i;0<s;s--){console.log("loop");var l=L(".wpbooklist-buyback-settings-input")[s].id,b=parseInt(L("#"+l).val())-1;console.log("nextNewVal"),console.log(b);var c=L(".wpbooklist-buyback-settings-input")[s-1].id;o<=parseInt(L("#"+c).val())&&L("#"+c).val(b)}}),L(document).on("click","#wpbooklist-buyback-settings-add-row-div",function(t){var e=L(".wpbooklist-buyback-settings-input").length,a=L(".wpbooklist-buyback-settings-input")[e-1].id,o=parseInt(L("#"+a).val())+1,i=o+1,s=L(".wpbooklist-buyback-settings-input-perc").length,l=L(".wpbooklist-buyback-settings-input-perc")[s-1].id,b=parseInt(L("#"+l).val())-1;b<=0&&(b=1),L('<div class="wpbooklist-buyback-settings-row-actual"><div class="wpbooklist-buyback-settings-row-actual-inner-row"><div class="wpbooklist-buyback-settings-row-actual-inner-row-top"><p class="wpbooklist-buyback-settings-row-actual-inner-row-top-p1">Amazon Sales Ranking</p><p class="wpbooklist-buyback-settings-row-actual-inner-row-top-p2">Percentage of Amazon Book Price to offer</p></div><div class="wpbooklist-buyback-settings-row-actual-inner-row-bottom"><p class="wpbooklist-buyback-settings-row-actual-inner-row-bottom-1">From: <input class="wpbooklist-buyback-settings-input" id=wpbooklist-buyback-settings-input-from-'+e+' type="number" value="'+o+'" />To: <input class="wpbooklist-buyback-settings-input" id=wpbooklist-buyback-settings-input-to-'+e+' type="number" value="'+i+'" /></p><p style="position:relative; left:3px;" class="wpbooklist-buyback-settings-row-actual-inner-row-bottom-2">Percentage:<input style="margin-left:4px;"class="wpbooklist-buyback-settings-input-perc" id=wpbooklist-buyback-settings-input-perc-'+e+' type="number" value="'+b+'" />%</p><p style="position:relative; left:8px;" class="wpbooklist-buyback-settings-row-actual-inner-row-bottom-3">Threshold:<input style="margin-left:4px;" class="wpbooklist-buyback-settings-input-perc" id=wpbooklist-buyback-settings-input-threshold-'+e+' type="number" step="0.01" value="8.00" /></p></div></div></div>').insertBefore(L(this).parent()),L("#wpbooklist-buyback-settings-delete-row-div").removeAttr("disabled")}),L(document).on("click","#wpbooklist-buyback-settings-delete-row-div",function(t){var e=L(".wpbooklist-buyback-settings-row-actual").length;if(1<e)L(".wpbooklist-buyback-settings-row-actual")[e-1].remove();else L(this).attr("disabled","true")}),L(document).on("click","#wpbooklist-buyback-settings-save-div button",function(t){var e="";L("#wpbooklist-spinner-buyback").animate({opacity:"1"}),L(".wpbooklist-buyback-settings-row-actual").each(function(){L(this).find("input").each(function(){e+=L(this).val()+"-"}),e+="0;"}),e=e.substring(0,e.length-1);var a={action:"wpbooklist_buyback_save_settings_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce11,settingstring:e};L.ajax({url:ajaxurl,type:"POST",data:a,timeout:0,success:function(t){document.location.reload(!0),console.log(t)}});console.log(e)}),L(document).on("click",".wpbooklist-buyback-settings-save-changes-row-div",function(t){var e=L(this).attr("data-orderid"),a=L("#wpbooklist-buyback-select-id-"+e).val();L("#wpbooklist-spinner-buyback").animate({opacity:"1"});var o={action:"wpbooklist_buyback_save_order_changes_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce12,orderStatus:a,orderId:e};console.log(o);L.ajax({url:ajaxurl,type:"POST",data:o,timeout:0,success:function(t){document.location.reload(!0),console.log(t)}})}),L(document).on("click",".wpbooklist-buyback-settings-delete-order-row-div",function(t){var e=L(this).attr("data-orderid");L("#wpbooklist-spinner-buyback").animate({opacity:"1"});var a={action:"wpbooklist_buyback_delete_order_changes_action",security:wpbooklist_buyback_php_variables.wpbooklistbuybacknonce13,orderId:e};console.log(a);L.ajax({url:ajaxurl,type:"POST",data:a,timeout:0,success:function(t){document.location.reload(!0),console.log(t)}})})});